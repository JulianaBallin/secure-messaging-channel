# üß© CipherTalk ‚Äì Checklist de Implementa√ß√£o e Seguran√ßa

**Status atual:** sistema funcional com comunica√ß√£o segura (TLS), registro de usu√°rios com RSA e armazenamento seguro no banco.  
**Objetivo final:** mensageria criptografada ponta a ponta (E2EE), multiusu√°rio e escal√°vel.

---

## ‚úÖ 1. Estrutura Geral

- [x] Estrutura modular (`backend/`, `client/`, `keys/`, `logs/`)
- [x] M√≥dulos separados por responsabilidade (auth, crypto, server, etc.)
- [x] CLI principal com menus base (`run_cli.py`)
- [x] Makefile com targets de setup, test, run e lint
- [x] `.gitignore` configurado para excluir chaves, caches e ambientes virtuais

---

## ‚öôÔ∏è 2. Backend ‚Äì Servidor e Banco de Dados

### üß± Servidor (`backend/server/server.py`)
- [x] Servidor ass√≠ncrono (asyncio) com suporte multiusu√°rio
- [x] Comunica√ß√£o segura via **TLS (SSL)**
- [x] Certificados gerados automaticamente (`cert.pem`, `key.pem`)
- [x] Libera√ß√£o autom√°tica de porta ocupada
- [x] Logging detalhado (`logs/server.log`)
- [x] Modulariza√ß√£o com `handlers.py`
- [x] Cria√ß√£o autom√°tica de banco (`ensure_database()` com cores ANSI)

üîí **Seguran√ßa atual:**
- [x] Canal de transporte criptografado (TLS 1.2+)
- [x] Hash seguro de senhas
- [x] Tokens JWT com expira√ß√£o
- [x] Armazenamento de chaves p√∫blicas no servidor
- [x] Chaves privadas mantidas apenas localmente

üß© **Melhorias futuras:**
- [ ] Limite de conex√µes por IP (prote√ß√£o DDoS)
- [ ] Rota√ß√£o autom√°tica de certificados TLS
- [ ] Assinatura digital de mensagens (RSA + SHA256)
- [ ] Criptografia de integridade (HMAC)
- [ ] Handler completo de grupos (broadcast e permiss√µes)

---

## üóÑÔ∏è 3. Banco de Dados (SQLite via SQLAlchemy)

- [x] Banco fixo em `backend/database/cipher_talk.db`
- [x] Modelos ORM: `User`, `Message`, `Group`, `GroupMember`
- [x] Cria√ß√£o autom√°tica via `Base.metadata.create_all()`
- [x] Sess√µes seguras (`SessionLocal`)
- [x] Caminho absoluto configurado em `connection.py`

üß© **Faltante:**
- [ ] Migra√ß√£o para PostgreSQL (escala real)
- [ ] Criptografia de dados (SQLCipher)
- [ ] √çndices otimizados
- [ ] Tabela de auditoria (a√ß√µes, IPs, timestamps)

---

## üîê 4. Criptografia ‚Äì RSA + IDEA

- [x] RSA 2048 bits (par de chaves p√∫blico/privado)
- [x] IDEA 128 bits para mensagens sim√©tricas
- [x] Chave IDEA cifrada com RSA antes do envio
- [x] Armazenamento seguro das chaves privadas (`chmod 600`)
- [x] E2EE parcial j√° implementado

üß© **Faltante:**
- [ ] Assinatura digital (autenticidade)
- [ ] Troca de chaves ef√™mera (Diffie-Hellman)
- [ ] Armazenamento seguro de metadados cifrados
- [ ] Rota√ß√£o/revoga√ß√£o de chaves RSA

---

## üë• 5. Autentica√ß√£o e Autoriza√ß√£o

- [x] Login e registro com hash de senha e JWT
- [x] Pol√≠ticas de senha forte
- [x] Nomes de usu√°rio √∫nicos e validados
- [x] Tokens JWT expiram ap√≥s 30 min
- [x] Tentativas de login registradas

üß© **Faltante:**
- [ ] Logout e revoga√ß√£o de tokens
- [ ] Controle de m√∫ltiplas sess√µes por usu√°rio
- [ ] Limite de tentativas (anti-brute force)
- [ ] Refresh tokens e reautentica√ß√£o
- [ ] Logs de auditoria detalhados

---

## üí¨ 6. Clientes (CLI) ‚Äì Comunica√ß√£o Segura

- [x] `client/auth/signup_cli.py`: registro TLS + RSA
- [x] Cria√ß√£o local de chave privada
- [x] Transmiss√£o segura (JSON via TLS)
- [ ] `client/auth/login_cli.py`: login com TLS + JWT
- [ ] `client/messages/send_cli.py`: envio de mensagens E2EE
- [ ] `client/messages/read_cli.py`: leitura e decripta√ß√£o local
- [ ] `client/groups/manage_cli.py`: administra√ß√£o de grupos
- [ ] `client/utils/session_manager.py`: persist√™ncia de tokens

---

## üîÑ 7. Escalabilidade e Multiusu√°rio

- [x] Multiusu√°rio em tempo real (StreamWriter por conex√£o)
- [x] Armazenamento de mensagens offline
- [x] Lista de usu√°rios online/offline
- [ ] Suporte a Redis (cache/sess√µes)
- [ ] PostgreSQL (banco distribu√≠do)
- [ ] Balanceamento de carga (m√∫ltiplas inst√¢ncias)
- [ ] Containeriza√ß√£o (Docker + Nginx TLS passthrough)
- [ ] API REST/GraphQL futura

---

## üß† 8. Seguran√ßa Avan√ßada

| Categoria | Implementado | Faltante |
|------------|---------------|-----------|
| Transporte | ‚úÖ TLS ativo | üîÑ Certificado CA externo |
| Ponta a ponta | ‚öôÔ∏è Parcial (RSA + IDEA) | üîí Assinatura digital e autentica√ß√£o forte |
| Armazenamento | ‚úÖ Hash e chaves locais | üîÑ Criptografia de logs e mensagens |
| Autentica√ß√£o | ‚úÖ JWT | üîÑ Roles, refresh tokens |
| Logs | ‚úÖ `logs/server.log` | üîÑ Registro de ataques e erros TLS |

---

## üìà 9. Pr√≥ximos Passos (Ordem Ideal)

| Etapa | Descri√ß√£o | Objetivo |
|-------|------------|----------|
| 1Ô∏è‚É£ | Implementar `client/auth/login_cli.py` | Login seguro com TLS + JWT |
| 2Ô∏è‚É£ | Criar `client/messages/send_cli.py` e `read_cli.py` | Mensagens E2EE completas |
| 3Ô∏è‚É£ | Adicionar `handlers_groups.py` | Cria√ß√£o e administra√ß√£o de grupos |
| 4Ô∏è‚É£ | Assinatura digital RSA | Autenticidade e integridade |
| 5Ô∏è‚É£ | Migra√ß√£o para PostgreSQL + Redis | Escalabilidade |
| 6Ô∏è‚É£ | API REST paralela | Integra√ß√£o com web/mobile |

---

## üîé Resumo

> O CipherTalk j√° possui:
> - Servidor seguro (TLS + multiusu√°rio)
> - Registro funcional via CLI com RSA
> - Estrutura modular pronta para expans√£o  
>
> Pr√≥ximo foco: **autentica√ß√£o segura (login TLS + JWT)** e **mensagens E2EE completas**.

---
