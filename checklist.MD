# ğŸ›¡ï¸ Checklist de Desenvolvimento â€“ CipherTalk

## âœ… 1. Estrutura Inicial do Projeto
- [x] Criar repositÃ³rio `secure-messaging-channel`
- [x] Adicionar `README.md` com descriÃ§Ã£o do projeto
- [x] Criar `LICENSE`
- [x] Gerar `.gitignore` completo
- [x] Criar `requirements.txt`
- [x] Estruturar diretÃ³rios principais:
  - `backend/auth/`
  - `backend/crypto/`
  - `backend/database/`
  - `backend/messages/`
  - `backend/groups/`
  - `backend/server/`
  - `tests/`

---

## âœ… 2. Banco de Dados (SQLite)
- [x] Configurar conexÃ£o com SQLite usando SQLAlchemy
- [x] Criar script `init_db.py` para geraÃ§Ã£o do banco (`cipher_talk.db`)
- [x] Estruturar tabelas:
  - `users` â†’ credenciais, chaves pÃºblicas/privadas, data de criaÃ§Ã£o
  - `messages` â†’ mensagens enviadas (armazenadas criptografadas)
  - `groups` â†’ metadados de grupos
  - `group_members` â†’ relaÃ§Ã£o usuÃ¡rios â†” grupos
- [x] Confirmar criaÃ§Ã£o com `inspect(engine).get_table_names()`

---

## âœ… 3. AutenticaÃ§Ã£o Segura
- [x] Criar hash de senha seguro com `passlib[bcrypt]`
- [x] Validar polÃ­ticas de senha:
  - MÃ­nimo 8 caracteres
  - Pelo menos 1 maiÃºscula
  - Pelo menos 1 nÃºmero
  - Pelo menos 1 caractere especial
- [x] Restringir nome de usuÃ¡rio (sem acentos/caracteres especiais, apenas `_`)
- [x] Garantir unicidade de usernames no banco
- [x] Armazenar apenas hash de senha no banco
- [x] Carregar variÃ¡veis sensÃ­veis com `os.getenv()` (`.env`)

---

## âœ… 4. Servidor AssÃ­ncrono Seguro (`asyncio`)
- [x] Criar servidor TCP assÃ­ncrono (`backend/server/server.py`)
- [x] Implementar criaÃ§Ã£o de usuÃ¡rio (`action: register`)
- [x] Implementar login (`action: login`) com validaÃ§Ã£o de hash
- [x] Gerar tokens JWT com expiraÃ§Ã£o (30 min)
- [x] Validar tokens em todas as mensagens
- [x] Recusar conexÃµes com token invÃ¡lido/expirado
- [x] Gerenciar estado de usuÃ¡rios online
- [x] Armazenar mensagens se usuÃ¡rio estiver offline e entregar no login
- [x] Logger de eventos importantes (login, logout, mensagem entregue/salva, erros)
- [x] Corrigir bug de encoding UTF-8 em respostas do servidor
- [x] Resolver conflito de porta `[Errno 98] address already in use`

---

## âœ… 5. Cliente CLI
- [x] Criar cliente assÃ­ncrono (`backend/server/client.py`)
- [x] Menu interativo:
  - [x] Criar novo usuÃ¡rio
  - [x] Fazer login
  - [x] Sair
- [x] Conectar ao servidor e receber token JWT
- [x] Enviar mensagens autenticadas
- [x] Receber mensagens em tempo real
- [x] Exibir mensagens armazenadas ao logar
- [x] Corrigir `JSONDecodeError` ao lidar com respostas nÃ£o-JSON
- [x] Melhorar UX com tratamento de erros de rede e autenticaÃ§Ã£o

---

## ğŸ“ 6. Consultas ao Banco (novo mÃ³dulo)
Criar pasta dedicada a consultas: `backend/database/queries/`

FunÃ§Ãµes planejadas:
- [ ] `get_all_users()` â€“ retorna todos os usuÃ¡rios e status (online/offline)
- [ ] `get_user_by_username(username)` â€“ busca usuÃ¡rio especÃ­fico
- [ ] `get_all_groups()` â€“ lista todos os grupos existentes
- [ ] `get_group_members(group_id)` â€“ lista de membros de um grupo
- [ ] `get_user_messages(user_id)` â€“ histÃ³rico completo de mensagens de um usuÃ¡rio
- [ ] `get_offline_messages(user_id)` â€“ mensagens nÃ£o lidas

---

## ğŸ” PrÃ³ximos Passos (planejados)
- [ ] Implementar criptografia automÃ¡tica RSA + IDEA no cliente
- [ ] Criptografia ponta a ponta em conversas em par e grupos
- [ ] Estrutura de grupos com:
  - [ ] CriaÃ§Ã£o e exclusÃ£o
  - [ ] AdiÃ§Ã£o/remoÃ§Ã£o de membros
  - [ ] PromoÃ§Ã£o a admin e regeneraÃ§Ã£o de chaves
- [ ] Caixa de mensagens com filtros (par vs grupo, lidas vs nÃ£o lidas)
- [ ] LÃ³gica de histÃ³rico por usuÃ¡rio e por grupo
- [ ] Logs detalhados de seguranÃ§a e chaves
- [ ] Interface de linha de comando para gerenciamento de grupos

---

ğŸ“Œ **Status atual:**  
âœ… Banco de dados funcionando  
âœ… Servidor assÃ­ncrono seguro com JWT  
âœ… CriaÃ§Ã£o e login de usuÃ¡rios com hash  
âœ… Envio e recebimento de mensagens com autenticaÃ§Ã£o  
âœ… Estrutura pronta para prÃ³xima etapa: criptografia ponta a ponta e lÃ³gica de grupos
